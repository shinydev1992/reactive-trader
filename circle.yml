machine:
  node:
    version: 5.1.0
  services:
    - docker

dependencies:
  cache_directories:
    - ~/.npm
  override:
    - docker info
    # pull base containers
    - . ./deploy/config && docker pull $nginxContainer:$vNginx
    - . ./deploy/config && docker pull $crossbarContainer:$vCrossbar
    - . ./deploy/config && docker pull $monoContainer:$vDnx
    - . ./deploy/config && docker pull $eventstoreContainer:$vEventstore

test:
  override:
    - chmod 755 deploy/docker/build/prepare
    - chmod 755 deploy/docker/build/servers/build.sh
    - cd deploy/docker/build && ./prepare build servers
    - cd src/client && npm install
    - cd src/client && npm run compile
